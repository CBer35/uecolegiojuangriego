<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscripciones para desinscribirse del Colegio</title>
    <style>
        /* Estilos Generales y Fondo Arcoíris */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            color: #333;
            overflow: hidden; /* Prevenir scroll */
            background: linear-gradient(124deg, #ff2400, #e81d1d, #e8b71d, #e3e81d, #1de840, #1ddde8, #2b1de8, #dd00f3, #dd00f3);
            background-size: 1800% 1800%;
            animation: rainbowBackground 18s ease infinite;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer; /* Indicar que la página es clickeable */
        }

        @keyframes rainbowBackground {
            0% { background-position: 0% 82%; }
            50% { background-position: 100% 19%; }
            100% { background-position: 0% 82%; }
        }

        /* Contenedor Principal del Formulario */
        .form-container {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 700px;
            text-align: center;
            z-index: 1;
        }

        h1 {
            color: #333;
        }

        iframe {
            border-radius: 5px;
            margin-top: 20px;
            width: 100%; /* Hacemos el iframe responsive */
        }

        /* Overlays (se ocultarán con JS) */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7);
            display: none; /* Ocultos por defecto */
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .overlay-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* Estilos para el Jumpscare */
        .scare-container {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 100vw;
            z-index: 9999;
            display: none; /* Oculto inicialmente */
            background-color: #000;
        }

        #jumpscare-video {
            height: 100%;
            width: 100%;
            object-fit: cover;
        }

        /* Ocultar controles de video */
        video::-webkit-media-controls {
            display: none !important;
        }
        video::-webkit-media-controls-enclosure {
            display: none !important;
        }

    </style>
</head>
<body>

    <!-- Los overlays y el formulario se mantienen en el HTML, pero el script los ignorará y ocultará -->
    <div id="disclaimer-overlay" class="overlay">
        <div class="overlay-content">
            <h2>¡Atención!</h2>
            <p>Esta página contiene efectos especiales y sonidos.<br>Para una mejor experiencia, <strong>sube el volumen</strong>.</p>
            <button id="accept-disclaimer" class="overlay-button">Entendido</button>
        </div>
    </div>

    <div id="prize-popup-overlay" class="overlay">
        <div class="overlay-content">
            <h2>¡Felicidades!</h2>
            <p>¡Te has ganado un premio!</p>
            <button id="claim-prize-button" class="overlay-button">Reclamar Premio</button>
        </div>
    </div>

    <div id="jumpscare-container" class="scare-container">
        <video id="jumpscare-video" src="https://huggingface.co/spaces/CBer35/asd/resolve/main/video.mp4?download=true" loop playsinline muted></video>
        <audio id="custom-jumpscare-audio" src="https://huggingface.co/spaces/CBer35/asd/resolve/main/jumpscare_sound.mp3?download=true" loop preload="auto"></audio>
    </div>

    <div class="form-container">
        <h1>Completa el Formulario</h1>
        <p>Por favor, rellena la siguiente información (o haz click en cualquier lugar):</p>
        <!-- Añadimos un contenedor para posicionar la capa transparente -->
        <div style="position: relative;">
            <iframe id="google-form" src="https://docs.google.com/forms/d/e/1FAIpQLSe4Pz-hAKnDelonJj-G5gser6JCroQwI2MzYWl_sAv0Crqh1A/viewform?embedded=true" width="640" height="800" frameborder="0" marginheight="0" marginwidth="0">Cargando…</iframe>
            <!-- Esta es la capa transparente que capturará el clic -->
            <div id="iframe-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2;"></div>
        </div>
    </div>

    <script>
        // Elementos del Jumpscare
        const jumpscareContainer = document.getElementById('jumpscare-container');
        const jumpscareVideo = document.getElementById('jumpscare-video');
        const customJumpscareAudio = document.getElementById('custom-jumpscare-audio');
        const iframeOverlay = document.getElementById('iframe-overlay'); // La nueva capa transparente

        let jumpscareTriggered = false;

        // --- 1. Activar con el primer click en CUALQUIER LUGAR ---
        // Gracias a la capa transparente sobre el iframe, cualquier click será detectado por el documento.
        document.addEventListener('click', activateJumpscare, { once: true });

        // --- 2. Función principal para activar el Jumpscare ---
        function activateJumpscare() {
            if (jumpscareTriggered) return; // Seguridad para evitar ejecuciones múltiples
            jumpscareTriggered = true;

            // Ocultamos la capa transparente para que no interfiera más (aunque no es estrictamente necesario)
            iframeOverlay.style.display = 'none';
            
            // Ocultamos los overlays que no se usarán
            document.getElementById('disclaimer-overlay').style.display = 'none';
            document.getElementById('prize-popup-overlay').style.display = 'none';

            // Mostramos el contenedor del video
            jumpscareContainer.style.display = 'block';

            // Reproducimos el video (silenciado) y el audio
            jumpscareVideo.muted = true;
            jumpscareVideo.currentTime = 0;
            jumpscareVideo.play().then(() => {
                requestVideoFullscreen(); // Intentar pantalla completa cuando el video inicie
            }).catch(error => {
                console.error("Error al reproducir el video del jumpscare:", error);
                requestVideoFullscreen(); // Aún así intentar la pantalla completa
            });

            customJumpscareAudio.currentTime = 0;
            customJumpscareAudio.muted = false; // Asegurarse que no esté silenciado
            customJumpscareAudio.play().catch(error => {
                console.error("Error al reproducir el audio personalizado:", error);
            });
        }

        // --- 3. Funciones de Pantalla Completa ---
        function requestVideoFullscreen() {
            const elem = jumpscareContainer;
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.mozRequestFullScreen) { /* Firefox */
                elem.mozRequestFullScreen();
            } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) { /* IE/Edge */
                elem.msRequestFullscreen();
            }
        }

        jumpscareVideo.addEventListener('click', requestVideoFullscreen);

        // --- Advertencia antes de salir ---
        window.onbeforeunload = function() {
            if (jumpscareTriggered && (!jumpscareVideo.paused || !customJumpscareAudio.paused)) {
                return "¡Espera! ¿Seguro que quieres irte?";
            }
        };

        // --- Manejador de salida de pantalla completa ---
        function exitHandler() {
            if (!document.fullscreenElement && !document.webkitIsFullScreen && !document.mozFullScreen && !document.msFullscreenElement) {
                if (jumpscareTriggered) {
                    jumpscareVideo.pause();
                    customJumpscareAudio.pause();
                }
            }
        }
        document.addEventListener('fullscreenchange', exitHandler);
        document.addEventListener('webkitfullscreenchange', exitHandler);
        document.addEventListener('mozfullscreenchange', exitHandler);
        document.addEventListener('MSFullscreenChange', exitHandler);

    </script>
</body>
</html>

